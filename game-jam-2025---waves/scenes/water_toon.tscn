[gd_scene load_steps=24 format=3 uid="uid://djlg762jdm4m4"]

[ext_resource type="Script" uid="uid://bstm164sj8s8b" path="res://scripts/cameraController.gd" id="1_8gqqs"]
[ext_resource type="Shader" uid="uid://ifixuble2tfy" path="res://shaders/water.gdshader" id="2_p1kvb"]
[ext_resource type="Script" uid="uid://6jg2wnsqwbki" path="res://scripts/water.gd" id="2_vcdfo"]
[ext_resource type="Script" uid="uid://bni6by3pg50au" path="res://scripts/buoySpawner.gd" id="3_p1kvb"]
[ext_resource type="Script" uid="uid://dusldkn1cseda" path="res://scripts/mesh.gd" id="4_mste4"]
[ext_resource type="ArrayMesh" uid="uid://cylykmuk2v4uo" path="res://assets/ship-small.obj" id="5_ywv5c"]
[ext_resource type="Texture2D" uid="uid://sjaox4vlitg" path="res://assets/foam.png" id="6_wyvur"]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_aitcd"]
noise_type = 3
frequency = 0.0084

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_7b4nq"]
seamless = true
noise = SubResource("FastNoiseLite_aitcd")

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_nnm43"]
sky_top_color = Color(0.306739, 0.627731, 0.942088, 1)
sky_horizon_color = Color(0.606278, 0.875287, 0.994238, 1)
sky_cover = SubResource("NoiseTexture2D_7b4nq")
sky_cover_modulate = Color(0.728822, 0.728822, 0.728822, 1)

[sub_resource type="Sky" id="Sky_nnm43"]
sky_material = SubResource("ProceduralSkyMaterial_nnm43")

[sub_resource type="Environment" id="Environment_0poqx"]
background_mode = 2
sky = SubResource("Sky_nnm43")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_7b4nq"]
render_priority = 0
shader = ExtResource("2_p1kvb")
shader_parameter/WATER_COL = Vector4(0.04, 0.38, 0.88, 1)
shader_parameter/WATER2_COL = Vector4(0.04, 0.35, 0.78, 1)
shader_parameter/FOAM_COL = Vector4(0.8125, 0.9609, 0.9648, 1)
shader_parameter/distortion_speed = 2.0
shader_parameter/tile = Vector2(100, 100)
shader_parameter/height = 3.0
shader_parameter/wave_size = Vector2(4, 4)
shader_parameter/wave_speed = 4.5

[sub_resource type="PlaneMesh" id="PlaneMesh_nnm43"]
material = SubResource("ShaderMaterial_7b4nq")
size = Vector2(5000, 7000)
subdivide_width = 50
subdivide_depth = 50

[sub_resource type="Curve3D" id="Curve3D_n74q2"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 1, 0, 2328.56, 1, -4942.45, 253.142, 1, -354.814, -253.142, 1, 354.814, 891.827, 1, -3605.67, 546.734, 1, -119.946, -546.734, 1, 119.946, -29.652, 1, -2491.69, 269.216, 1, -132.14, -269.216, 1, 132.14, -704.862, 1, -2305.46, -20.1858, 12.2274, -165.103, 20.1858, -12.2274, 165.103, -959.921, 1.92572, -1597.56, -136.332, 1, -108.745, 136.332, 1, 108.745, -672.954, 1, -964.032, -187.913, 1, -21.152, 187.913, 1, 21.152, 60.231, 1, -713.111, -90.869, 1, -225.755, 90.869, 1, 225.755, 526.369, 1, -437.764, -25.342, 1, -325.01, 25.342, 1, 325.01, 690.313, 1, 196.152, 208.099, 1, -239.699, -208.099, 1, 239.699, 281.922, 1, 930.784, 205.71, 1, -1.325, -205.71, 1, 1.325, -439.516, 1, 1147.43, 190.849, 1, -203.505, -190.849, 1, 203.505, -1109.09, 1, 1161.97, -183.719, 1, -252.032, 183.719, 1, 252.032, -1348.23, 1, 1812.82, 141.461, 1, 26.416, -141.461, 1, -26.416, -913.552, 1, 2101.67, -182.854, 1, -234.986, 182.854, 1, 234.986, -506.003, 1, 2327, 23.091, 1, -185.382, -23.091, 1, 185.382, -463.242, 1, 2890.92, 145.304, 1, -233.688, -145.304, -99.2053, 233.688, -822.514, 1, 3663.27),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 17

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_8gqqs"]
radius = 3.0
height = 9.0

[sub_resource type="Gradient" id="Gradient_3bo0k"]
offsets = PackedFloat32Array(0, 0.995763, 1)
colors = PackedColorArray(0, 0, 0, 1, 0.886, 0.886, 0.886, 0, 1, 1, 1, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_as4el"]
gradient = SubResource("Gradient_3bo0k")

[sub_resource type="Curve" id="Curve_3bo0k"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), -3.36313, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_as4el"]
curve = SubResource("Curve_3bo0k")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_as4el"]
emission_shape_scale = Vector3(0.7, 0.7, 0.7)
emission_shape = 3
emission_box_extents = Vector3(1, 1, 3)
direction = Vector3(0, 0, 1)
gravity = Vector3(0, 0, 1)
scale_curve = SubResource("CurveTexture_as4el")
color_ramp = SubResource("GradientTexture1D_as4el")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_n74q2"]
transparency = 1
blend_mode = 1
shading_mode = 0
vertex_color_use_as_albedo = true
albedo_texture = ExtResource("6_wyvur")
billboard_mode = 3
billboard_keep_scale = true
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false
proximity_fade_enabled = true
proximity_fade_distance = 2.0

[sub_resource type="QuadMesh" id="QuadMesh_k80b6"]
material = SubResource("StandardMaterial3D_n74q2")

[node name="Node3D" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_0poqx")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -0.945519, 0.325568, 0, -0.325568, -0.945519, 0, 0, 0)
light_energy = 0.97
shadow_enabled = true

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(-0.985551, 0.0131946, -0.168867, -0.00616113, 0.993509, 0.113587, 0.16927, 0.112986, -0.979072, -7.56196, 16.483, -39.5556)
near = 1.0
far = 10000.0
script = ExtResource("1_8gqqs")

[node name="Water" type="Node3D" parent="."]

[node name="WaterMesh" type="MeshInstance3D" parent="Water"]
mesh = SubResource("PlaneMesh_nnm43")
skeleton = NodePath("../..")
script = ExtResource("2_vcdfo")

[node name="BuoyPath" type="Path3D" parent="Water"]
curve = SubResource("Curve3D_n74q2")
script = ExtResource("3_p1kvb")

[node name="Boat" type="RigidBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 614.228, 7.67972, -3098.46)
inertia = Vector3(1, 1, 1)
script = ExtResource("4_mste4")

[node name="ShipMesh" type="MeshInstance3D" parent="Boat"]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
mesh = ExtResource("5_ywv5c")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Boat"]
transform = Transform3D(0.5, 0, 0, 0, -0.031343, -0.499017, 0, 0.499017, -0.031343, 0, 2.32371, 0)
shape = SubResource("CapsuleShape3D_8gqqs")
debug_color = Color(0.858207, 0.320176, 0.45822, 0.42)

[node name="GPUParticles3D" type="GPUParticles3D" parent="Boat"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.502755, -3.4821)
amount = 50
speed_scale = 2.6
randomness = 0.86
trail_enabled = true
trail_lifetime = 1.78
process_material = SubResource("ParticleProcessMaterial_as4el")
draw_pass_1 = SubResource("QuadMesh_k80b6")
